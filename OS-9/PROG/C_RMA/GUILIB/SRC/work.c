#include <stdio.h>#include <gui.h>#include <mouse.h>#include <os9.h>#include <time.h>#include <utime.h>#define UPDATE  3#define TIMOUT  10#define FOLLOW  1#define MOUSSIG 10#define STDIN   0#define mox   mspack->pt_wrx#define moy   mspack->pt_wry#define mb    mspack->pt_cbsa#define gcon  SetGC(wpath,202,1)#define gcoff SetGC(wpath,0,0)typedef struct {     char type;     int  x;     int  y;     int  len;     char data[256];     } I1;extern MSRET *mspack;extern MSRET mreal;extern int wpath;extern int cksig();extern int sigcode;extern int pid;extern BUTTON b[10];extern TITLE t[1];extern int MIL;extern bell[];extern numbers[];extern int ahr[3],amn[3];extern char afile[3][32];extern int state;extern char dplist[80];char *inform[]= {  "       --DIGICLOCK--",  " ",  "This project was conceived",  "as an eye-pleasing demo for",  "the capabilities of GUI.L.",  "We hope you enjoy it.",  " ",  "           -- James -n- Dan",  NULL };Info(){     register char **idx;     OWSet(wpath,1,4,10,32,12,0,1);     Man_WN(wpath,0,0,32,12,EW_SHADOWED,12);     CWArea(wpath,2,2,28,9);     BColor(wpath,12);     FColor(wpath,14);     Clear(wpath);     for (idx=inform; *idx; idx++)       puts(*idx);     setmouse(STDIN,MOUSSIG);     tsleep(0);     OWEnd(wpath);}defines(){/* This is a while series of data defines and initializations.  I   put it here to get it out of my face... */     setbuf(stdout,NULL);     setbuf(stdin,NULL);     SetGui(wpath,8,0);     Setup();     wpath=_iob[1]._fd;     strcpy(afile[0],"Alarm1.pla");     strcpy(afile[1],"Alarm2.pla");     strcpy(afile[2],"Alarm3.pla");     Palette(wpath,0,56); Palette(wpath,1,0);     Def_BT(&b[0],"Info ",21,2,BT_REG);     Def_BT(&b[1],"Alarm",21,4,BT_REG);     Def_BT(&b[2],"Modes",27,2,BT_REG);     Def_BT(&b[3],"Exit ",27,4,BT_REG);     Def_BT(&b[4],"  ",36,3,BT_BIG);      strcpy(b[4].bt_name,"");     Def_BT(&b[5],"Play Dir",1,3,BT_REG);     Def_BT(&b[6],"24-Hour ",1,1,BT_REG);     Def_BT(&b[7],"Alarm 1",1,1,BT_REG);     Def_BT(&b[8],"Alarm 2",1,3,BT_REG);     Def_BT(&b[9],"Alarm 3",1,5,BT_REG);     Def_TL(&t[0],"PM",16,2);     strcpy(dplist,"/dd/apps/fx/play");}setmouse(path, code)int path, code;{   sigcode = 0;   _ss_msig(path, code);}cksig(code)int code;{   _ss_rel(STDIN);   sigcode = code;   switch(sigcode) {     case 2:     case 3:          printf("\7");          break;     case MOUSSIG:          Chkbuts();          break;     }   _ss_msig(STDIN,MOUSSIG);}Chkbuts(){     switch(state) {       case 0:              Butpush1();              break;       case 1:              Butpush2();              break;       case 2:              Butpush3();              break;       case 3:              Sure();              break;       default:              fprintf(stderr,"Program error!  Unknown state.");              Quit(1);     }}LoadIcons(path,pid)int path;int pid;{     int count;          I1 *beli;     I1 *numi;     beli=bell;     numi=numbers;     LoadIke(path,pid,1,beli);     for (count=2; count<13; count++) {          LoadIke(path,pid,count,numi);          numi++;          }}LoadIke(path,pid,num,iki)int path;int pid,num;I1 *iki;{     int w,x,y,z;     x=iki->x;     y=iki->y;     z=iki->len;     GPLoad(wpath,pid,num,8,x,y,z);     write(wpath,&(iki->data[0]),z);}Setup(){     FILE *path;     char block[2048];     int x,y,z,xin,lopx,lopy;     char in;     Wallpaper(wpath,"wall.ike");     LoadIcons(wpath,pid);     EchoOff(wpath);     CurOff(wpath);     gcon;}Quit(err)int err;{     KilBuf(wpath,pid,0);     EchoOn(wpath);     CurOn(wpath);     gcoff;     FColor(wpath,0);     BColor(wpath,2);     CurXY(wpath,0,0);     exit(err);}EchoOff(path)int path;{     char scrn[32];     getstat(0,path,scrn);     scrn[4]=0;     setstat(0,path,scrn);}EchoOn(path)int path;{     char scrn[32];     getstat(0,path,scrn);     scrn[4]=1;     setstat(0,path,scrn);}/*EOF*/