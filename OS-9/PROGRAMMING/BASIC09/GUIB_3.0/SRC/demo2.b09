PROCEDURE Demo2REM *REM *  Run this program in a type 8 40x24 window.REM *TYPE registers=cc,a,b,dp:BYTE; x,y,u:INTEGERDIM regs:registersDIM done:BOOLEANDIM color,code,datum,path,procid:BYTEDIM key:STRING[1]DIM command:STRING[3]DIM status,line:STRING[60]DIM percent1,percent2,shade,rgb:INTEGERDIM toggled,i,j:INTEGERDIM pushed,button1,button2,z1,z2,xmouse,ymouse:INTEGERpercent1=0 \percent2=0REM Test version 3.0.RUN guib("VERSION",status,3,0,z1,z2)IF status="BAD" THEN PRINT CHR$(12); PRINT "DEMO requires GuiB 3.0!"PRINT INPUT "Press [ENTER]",keyEND ENDIF RUN gfx2("font",200,1)RUN gfx2("curoff")RUN gfx2("scalesw","off")RUN gfx2("propsw","on")RUN gfx2("palette",0,56) \RUN gfx2("palette",1,7)RUN gfx2("palette",2,63) \RUN gfx2("palette",3,0)RUN gfx2("palette",4,36) \RUN gfx2("palette",5,32)RUN gfx2("palette",6,4) \RUN gfx2("palette",7,18)RUN gfx2("palette",8,16) \RUN gfx2("palette",9,1)RUN gfx2("palette",10,9) \RUN gfx2("palette",11,8)RUN gfx2("palette",12,56) \RUN gfx2("palette",13,7)RUN gfx2("palette",14,63) \RUN gfx2("palette",15,0)RUN gfx2("color",15,13,15)RUN gfx2("clear")OPEN #path,"/dd/sys/earth.sys":READREPEAT READ #path,lineREM Set up the palettes for color registers 12-15 from the EARTH.SYS file.IF LEFT$(line,3)="REG" THEN FOR i=12 TO 15command=STR$(i)+"="IF LEN(command)<3 THEN command="0"+commandENDIF IF MID$(line,4,3)=command THEN color=0FOR j=1 TO 3rgb=VAL(MID$(line,j+6,1))shade=LAND(rgb,2)*2^(5-j)shade=shade+LAND(rgb,1)*2^(3-j)color=color+shadeNEXT jRUN gfx2("palette",i,color)ENDIF NEXT iENDIF UNTIL EOF(#path)CLOSE #pathREM Get group number for graphic bufferscode:=$0CRUN syscall(code,regs)procid:=regs.aON ERROR GOTO 130RUN gfx2("killbuff",procid,0)130 ON ERROR REM Load arrow into buffer #5.RUN gfx2("gpload",procid,5,6,12,15,45)FOR i=1 TO 45READ datumPUT #1,datumNEXT iREM Screen 10REM Change window typeprint #0,chr$($1b)+chr$($21);run gfx2("Dwend")run gfx2("dwset",7,0,0,80,24,3,0,0)run gfx2("select")run gfx2("Propsw","on")run gfx2("curoff")RUN gfx2("palette",0,56) \RUN gfx2("palette",1,7)RUN gfx2("palette",2,63) \RUN gfx2("palette",3,0)RUN gfx2("palette",4,36) \RUN gfx2("palette",5,32)RUN gfx2("palette",6,4) \RUN gfx2("palette",7,18)RUN gfx2("palette",8,16) \RUN gfx2("palette",9,1)RUN gfx2("palette",10,9) \RUN gfx2("palette",11,8)RUN gfx2("palette",12,56) \RUN gfx2("palette",13,7)RUN gfx2("palette",14,63) \RUN gfx2("palette",15,0)RUN gfx2("color",15,13,15)RUN gfx2("clear")RUN gfx2("color",12)RUN guib("SQUARE","FILLED",1,1,110,164)RUN guib("WINDOW","RAISED",1,1,110,164)RUN guib("TITLE","  Windows:",1,1,0,12)RUN guib("WINDOW","RAISED",12,22,80,25)RUN gfx2("color",15,12)RUN gfx2("curxy",4,4)PRINT "Raised"; RUN guib("WINDOW","DROPPED",12,50,80,25)RUN gfx2("color",15,12)RUN gfx2("curxy",4,7)PRINT "Dropped"; RUN guib("WINDOW","PICFRAME",12,78,80,25)RUN gfx2("color",15,12)RUN gfx2("curxy",4,11)PRINT "Picframe"; RUN guib("WINDOW","CARVED",12,106,80,25)RUN gfx2("color",15,12)RUN gfx2("curxy",4,14)PRINT "Carved"; RUN guib("WINDOW","ETCHED",12,134,80,25)RUN gfx2("color",15,12)RUN gfx2("curxy",4,18)PRINT "Etched"; RUN gfx2("color",12)RUN guib("SQUARE","FILLED",177,1,110,140)RUN guib("WINDOW","RAISED",177,1,110,140)RUN guib("TITLE","  Squares:",23,1,0,12)RUN guib("SQUARE","POPPED",191,22,80,25)RUN gfx2("color",15,12)RUN gfx2("curxy",26,4)PRINT "Popped"; RUN guib("SQUARE","PUSHED",191,50,80,25)RUN gfx2("color",15,12)RUN gfx2("curxy",26,7)PRINT "Pushed"; RUN gfx2("color",13)RUN guib("SQUARE","OUTLINED",191,78,80,25)RUN gfx2("color",15,12)RUN gfx2("curxy",26,11)PRINT "Outlined"; RUN gfx2("color",13)RUN guib("SQUARE","FILLED",191,106,80,25)RUN gfx2("color",15,13)RUN gfx2("curxy",26,14)PRINT "Filled"; RUN gfx2("color",12)RUN guib("SQUARE","FILLED",5,166,120,24)RUN guib("WINDOW","RAISED",5,166,120,24)RUN guib("ARROW","LEFT",10,170)RUN guib("MAKEBAR","HORIZ",26,170,75)RUN guib("ARROW","RIGHT",101,170)RUN guib("MOVEBAR","HORIZ",26,170,75,0)RUN gfx2("color",12)RUN guib("SQUARE","FILLED",125,15,26,142)RUN guib("WINDOW","RAISED",125,15,26,142)RUN guib("ARROW","UP",130,20)RUN guib("MAKEBAR","VERT",130,36,100)RUN guib("MOVEBAR","VERT",130,36,100,0)RUN guib("ARROW","DOWN",130,136)RUN gfx2("color",12)RUN guib("SQUARE","FILLED",160,145,150,46)RUN guib("WINDOW","RAISED",160,145,150,46)RUN guib("BUTTON","Button",22,20,0,6)RUN guib("BUTTON","Button",22,22,0,6)RUN guib("GADGET","DIAMOND",247,170,0)RUN gfx2("curxy",32,21)RUN gfx2("color",15,12)PRINT "Gadget"; RUN gfx2("color",12)RUN guib("SQUARE","FILLED",320,1,318,190)RUN guib("WINDOW","RAISED",320,1,318,190)RUN guib("TITLE","GuiB 3.0",41,1,0,38)RUN guib("WINDOW","ETCHED",393,34,130,150)RUN gfx2("curxy",54,4)RUN gfx2("color",15,12)PRINT "Gadgets"RUN guib("GADGET","BULLET",418,75,0)RUN gfx2("curxy",54,9)RUN gfx2("Color",15,12)PRINT "Bullet"; RUN guib("GADGET","DIAMOND",418,98,0)RUN gfx2("curxy",54,12)RUN gfx2("Color",15,12)PRINT "Diamond"; RUN guib("GADGET","CLICKBOX",418,121,0)RUN gfx2("curxy",54,15)RUN gfx2("Color",15,12)PRINT "Clickbox"; RUN guib("ELINE","HORIZ",400,134,112)RUN guib("BUTTON","  Quit  ",52,19,0,7)RUN gfx2("gcset",procid,5)GOSUB 440toggled=0pushed=0done=FALSEREPEAT RUN guib("MOUSE","CLICK",button1,button2,xmouse,ymouse)IF button1>0 THEN IF xmouse>=92 AND xmouse<=108 AND ymouse>=71 AND ymouse<=79 THENGOSUB 450toggled=ABS(toggled-1)RUN guib("GADGET","BULLET",100,75,toggled)RUN gfx2("gcset",procid,5)GOSUB 440FOR i=1 TO 1000 \NEXT iENDIF IF xmouse>=92 AND xmouse<=108 AND ymouse>=92 AND ymouse<=106 THENGOSUB 450toggled=ABS(toggled-1)RUN guib("GADGET","DIAMOND",100,98,toggled)RUN gfx2("gcset",procid,5)GOSUB 440FOR i=1 TO 1000 \NEXT iENDIF IF xmouse>=92 AND xmouse<=108 AND ymouse>=117 AND ymouse<=125 THENGOSUB 450toggled=ABS(toggled-1)RUN guib("GADGET","CLICKBOX",100,121,toggled)RUN gfx2("gcset",procid,5)GOSUB 440FOR i=1 TO 1000 \NEXT iENDIF IF xmouse>=52*8-4 AND xmouse<=52*8-4+6*8+7 AND ymouse>=19*8-4 AND ymouse<=19*8-4+15 THEN GOSUB 450RUN guib("BUTTON","  Quit  ",52,19,1,7)done=TRUEENDIF ENDIF UNTIL doneREM Final Screenprint #0,chr$($1b)+chr$($21);run gfx2("Dwend")run gfx2("dwset",2,0,0,80,24,0,1,2)run gfx2("select")RUN gfx2("palette",0,56) \RUN gfx2("palette",1,7)RUN gfx2("palette",2,63) \RUN gfx2("palette",3,0)RUN gfx2("palette",12,56) \RUN gfx2("palette",13,7)RUN gfx2("palette",14,63) \RUN gfx2("palette",15,0)RUN gfx2("color",15,13,15)135 RUN gfx2("curon")RUN gfx2("color",14,15,15)RUN gfx2("clear")RUN gfx2("propsw","off")GOSUB 450RUN gfx2("killbuff",procid,0)REM We're done.END REM Turn mouse on.440 RUN guib("MOUSE","ON")RETURN REM Turn off mouse pointer450 RUN guib("MOUSE","OFF")RUN gfx2("gcset",0,0)RETURN REM Data for arrow pointer.DATA 128,0,0DATA 160,0,0DATA 184,0,0DATA 190,0,0DATA 191,128,0DATA 191,224,0DATA 191,248,0DATA 191,254,0DATA 191,234,128DATA 186,224,0DATA 162,248,0DATA 128,184,0DATA 0,190,0DATA 0,46,0DATA 0,42,0END 