/* file ~VM640/BDP.C  -1B2-        begun 88/12/30 * ALL Direct Page Global vars for Music Score Editor * Contains all DPs from old BGlob.c, plus forced immigrants from *  all other Bill files. * This centralization is necessary for "cheat" fragging of subrs. * NOTE: Fcn pntrs are no longer Direct, but still in this file.*/#include "wmuse.h"#include "wwidths.h"/* INITIALIZED D.Page stuff, gets very first locations,*  right where "*NULL = something;" stmts toss grenades.*/direct int     dummy =  0;         /* For argfix(), and *NULL bug-catcher! *//* Uninitialized (or freebie = 0) DP stuff, by the ton */direct ubyte     mydat0;   /* For peeking at system DP Mem thru GIME *//* Virtual Memory goodies */direct EVENT     *curevp,       /* current event pointer */     *database,     /* Bottom of current page (1st byte's addr) */     *curptop;      /* highest event ptr possible on current page */direct Index     nevents,  /* actual # of current events */     curind;   /* current index in VMem system */direct sexy     group,    /* buffer group, usually our PID */     curpage,  /* current page no. */     nmpages;  /* how many pages are in memory *//* end of VMem goods */direct Index     godotind, /* most recent 'g.' command loca */     undind;   /* saves X'ed event *//* Preferences Init stuff, packed for quick file I/O.  DON'T RE-ORDER!  */direct short   /* Was sexy, but must protect size */     forergb, backrgb;    /* fore & back ground colors */direct bool     hires,     /* Hi-Res mouse adaptor selected */     midiser,   /* enable RS232 bit-banger serial MIDI */     midipak,   /* enable hardware COCO-MIDI interface */     readonly;  /* Score File is read/play-only */direct ubyte     printype;direct bool     instren,  /* enable Play to send Instr changes */     mididev,  /* enable /MIDI driver output */     clocken,  /* enable MIDI Clock for drummers */     left,     /* Use left mouse port, hires or not */     midievts;direct ubyte     midinnmin, midinnmax;direct byte     accentwt;      /* OSK has a separate layoffwt after this */direct bool     pitcarry,     snap,     sticky,   /* old end 3/97 */     doesff, automarg,   /* Printer options */     beam, thick,     halfstaf; /* 5 more bytes 4/97 *//******** End preferences init items */direct int /* mx, my,     /* mouse location */    moldx, moldy,   /* previous mouse location */    xyoff;      /* index offset for graf'es; PROBLEM if Index goes US */direct sexy    nparts,    /* this affects file header size */    nstaves,   /* so does this. */    keysig,    /* + sharps, - flats */    secmin,    /* Global Master (inverse) tempo */    transp,    /* in semitones */    velo;      /* key-down velocity "Volumaster" *//* Info about this composition */direct short     nbars, scorelvl;direct sexy     numer = 4, denom = 4, /* Time/Signature */     dencodur,     nzones;       /* ==nbeats unless tripper */direct Etime      dendur,        /* length of a T/S beat */     zonedur;       /* length of a "zone" */direct sexy     uptime, dntime,/* Mouse button timers */     curcurse,      /* current cursor code */     broke;         /* BREAK and ^C interrupt flag */direct bool     pldebug,  /* debug Play, make it print bar #s etc. */     aborted,  /* place()'s mouse abort switch */     compact,  /* showall() to squeeze notes */     tripper,  /* using a triplet-style T/S */     rfr_scr,  /* refresh (redraw) score screen */     rfr_men,  /*   and the menu */     rfr_rep,  /*   and the Representative note/rst */     rfr_bar,  /*   and the top Menu Bar */     rfr_tit,  /*   and the Title Banner (once on readin) */     automon,  /* automouse mode is on */     dosqueez, /* do squeeze score prints vertically */     scrclock, /* Score says to use clock */     smf;      /* write to Std MIDI output file *//* Variables for SHOWALL() and friends */direct int     xgoal,    /* where gind's event should be on screen */     gbar;     /* bar containing gind *//*   lftbar, ritbar,     /* edge measures shown at all *//*   lftlin, ritlin;     /* left- & right-most barlines shown */direct Index     gind,     /* index of goal event */     gbarind,  /* index of gbar's barline */     ritind, lftind;     /* edgemost indices actually shown */direct Time     length;             /* Total length of piece so far *//* "ArgBox" for faster piping to Fran.*  These MUST be kept contiguous and in order! */direct ubyte     arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7;/* CHIPS.C's Statics to bind parse() to regen() and save states * between regen() calls: */direct sexy      rshift,       /* how far ...left has been shifted so far */      vslot;        /* victim's slot (note -vs- rest) */direct short      strleft,      /* Straight (x3) duration left */      trileft;      /* Triplet (x2) duration left */direct Deltime      durleft;      /* total duration left, WITH multipliers */direct bool      tripnow;      /* Output triplets now *//* PLAY.C's Direct-Page stuff for speed;*  put some of these back if you need data space! *//* For repeats, Ith endings, DC/DS, Coda, etc */typedef struct {    Index lefty;    sexy  repcnt;} REPSTACK;direct char     *midics;direct unsigned     tempo,    /* Human (score) tempo */     machtemp, /* play()'s machine tempo */     contemp,  /* secmin * 20 to convert between the above */     smfdelta,     midicnt;  /* counts MIDI bytes sent serially */direct bool     sound, inending,     senzarep;      /* turns repeats off */direct REPSTACK *rsptr;     /* pointer to 1st empty stack slot */direct sexy     plpart, plslot, white, midnote, oldmid, chrind, fix,     plart, midchan, accent, runstat;direct Index     sign, dcds,  /* Sign and DC/DS */     nthendx,      /* Next Ith ending's loca */     coda;direct short     residue;direct Etime     now, lastime;direct Deltime     delt;direct int     /* really FILE, but no want stdio.h in here ? */     *fmidi;   /* for PlayMI stdio to device /MIDI */direct Deltime /* 90/9/29 */     takeoff,  /* ticks to clear min of remtimes[] */     tilloff,  /* ticks till next note turnoff */     ttemp;    /* time temporary */direct int     towait;   /* ticks to wait in sleep60() *//* Cresc & Accel vars */direct Deltime     crdelt, acdelt;   /* runtime so far */direct short     crbeglvl, acbegmt, /* init vol & machtemp*/     crmult, acmult, acscale;/* End of cresc & accel *//* End of play() stuff *//* Fragging-related stuff */direct int     subrhead = 0;  /* really don't need inits explicit */direct char    curmod = '\0';  /* eof ~VM640/BDP.C */