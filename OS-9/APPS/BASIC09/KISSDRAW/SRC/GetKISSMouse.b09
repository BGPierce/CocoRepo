PROCEDURE GetKISSMouse(* Reads the present location of the mouse and(* returns the status of the button.TYPE rodent=Vld,Act,ToTm:BYTE; X1:INTEGER; TTTo:BYTE; TSSt:INTEGER; CBSA,CBSB,CCtA,CCtB,TTSA,TTSB,TLSA,TLSB:BYTE; X2,BDX,BDY:INTEGER; Stat,Res:BYTE; AcX,AcY,WRX,WRY:INTEGERTYPE stats=IsEvent,InWindow,InToolBox,InMenuBar,line,box,circle,ellipse,bar,arc,fill,text,freehand,RecordOn:BOOLEANTYPE cursor=OutPut,Scale,ScreenType,NoCur,arrow,pencil,cross,hourglass,NoIcon,TextBar,Scross,Icon,IconBuff,pattern,horzline,vertline,slantright,slantleft,dots:BYTETYPE codes=DArc,DBar,DBox,DCircle,DEllipse,DLine,DPoint,DFill,DSetPtr,DPutCur,DSetCur,DLogic,DPattern:INTEGERTYPE object=DCode,HorP,VerP:INTEGERTYPE orgin=DPSCode,HanX,HanY:INTEGERTYPE packet=mouse:rodent; status:stats; pointer:cursor; Code:codes; Pen:object; Handle:orginPARAM Event:packetTYPE registers=cc,a,b,dp:BYTE; x,y,u:INTEGERDIM RegisterSet:registersDIM callcode:BYTERegisterSet.a:=0RegisterSet.b:=$89RegisterSet.x:=ADDR(Event.mouse)RegisterSet.y:=1callcode:=$8DRUN syscall(callcode,RegisterSet)IF Event.mouse.CBSA<>0 THEN Event.status.IsEvent:=TRUEELSE Event.status.IsEvent:=FALSEENDIF IF Event.mouse.AcY<10 THEN Event.status.InMenuBar:=TRUEELSE Event.status.InMenuBar:=FALSEENDIF IF Event.mouse.AcX<40 THEN Event.status.InToolBox:=TRUEELSE Event.status.InToolBox:=FALSEENDIF IF NOT(Event.status.InMenuBar) AND NOT(Event.status.InToolBox) THENEvent.status.InWindow:=TRUEELSE Event.status.InWindow:=FALSEENDIF REM Put out the CursorEvent.Pen.DCode:=Event.Code.DPutCurEvent.Pen.HorP:=Event.mouse.AcX \Event.Pen.VerP:=Event.mouse.AcYPUT #1,Event.PenEND 